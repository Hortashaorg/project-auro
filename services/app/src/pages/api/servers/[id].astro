---
import { throwError } from "@package/common";
import { getDB } from "@package/database";
import Servers from "./index.astro";

const db = await getDB();
const serverId = Astro.params.id ?? throwError("No server id found");
const account = Astro.locals.account ?? throwError("No account found");
await db
	.updateTable("account")
	.set({
		currentServerId: serverId,
	})
	.where("id", "=", account.id)
	.executeTakeFirstOrThrow();
---
<Servers />