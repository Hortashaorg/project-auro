---
import LocationForm from "@sections/admin/LocationForm.astro";
import { parseFormData, validateFormData } from "@utils/parse";
import { z } from "astro:content";

const params = await parseFormData(Astro.request);

const userForm = z.object({
	name: z
		.string()
		.min(3, { message: "Name must be at least 3 characters long" })
		.max(20, { message: "Name must be at most 20 characters long" })
		.regex(/^[a-zA-Z\s]+$/, {
			message: "Name can only contain letters",
		})
		.refine((val) => /[a-zA-Z]/.test(val), {
			message: "Name must contain at least one letter",
		}),
	asset: z.string().uuid({ message: "You must select an asset" }),
});

const { errors } = await validateFormData(params, userForm);
console.log(errors);
---
<LocationForm errors={errors} name={params.name} asset={params.asset} />